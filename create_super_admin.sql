-- Create the user in auth.users INSERT INTO auth.users (instance_id, id, aud, role, email, encrypted_password, email_confirmed_at, created_at, updated_at, confirmation_token, email_change_token_new, recovery_token) VALUES ('00000000-0000-0000-0000-000000000000', gen_random_uuid(), 'authenticated', 'authenticated', 'reeceharding@gmail.com', crypt('20Reharding', gen_salt('bf')), now(), now(), now(), encode(gen_random_bytes(32), 'hex'), encode(gen_random_bytes(32), 'hex'), encode(gen_random_bytes(32), 'hex')) RETURNING id; INSERT INTO public.organizations (name, sla_tier) VALUES ('FlowSupport Admin', 'premium') RETURNING id; WITH user_id AS (SELECT id FROM auth.users WHERE email = 'reeceharding@gmail.com'), org_id AS (SELECT id FROM public.organizations WHERE name = 'FlowSupport Admin') INSERT INTO public.profiles (id, role, display_name, email, org_id) SELECT user_id.id, 'super_admin'::public.user_role, 'Reece Harding', 'reeceharding@gmail.com', org_id.id FROM user_id, org_id;
