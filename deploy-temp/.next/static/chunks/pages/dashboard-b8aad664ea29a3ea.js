(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{7100:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(6132)}])},6939:(e,t,s)=>{"use strict";s.d(t,{A:()=>j});var r=s(4848),a=s(6540),i=s(6715),o=s(5234),d=s(1106),n=s.n(d),l=s(7724),c=s(2781),u=s(2732),m=s(4668),x=s(6094);let h=c.Kq,f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(c.LM,{ref:t,className:(0,x.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a})});f.displayName=c.LM.displayName;let g=(0,u.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-slate-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-slate-800",{variants:{variant:{default:"border bg-white text-slate-950 dark:bg-slate-950 dark:text-slate-50",destructive:"destructive group border-red-500 bg-red-500 text-slate-50 dark:border-red-900 dark:bg-red-900 dark:text-slate-50"}},defaultVariants:{variant:"default"}}),p=a.forwardRef((e,t)=>{let{className:s,variant:a,...i}=e;return(0,r.jsx)(c.bL,{ref:t,className:(0,x.cn)(g({variant:a}),s),...i})});p.displayName=c.bL.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(c.rc,{ref:t,className:(0,x.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-slate-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-slate-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-slate-50 group-[.destructive]:focus:ring-red-500 dark:border-slate-800 dark:ring-offset-slate-950 dark:hover:bg-slate-800 dark:focus:ring-slate-300 dark:group-[.destructive]:border-slate-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-slate-50 dark:group-[.destructive]:focus:ring-red-900",s),...a})}).displayName=c.rc.displayName;let v=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(c.bm,{ref:t,className:(0,x.cn)("absolute right-2 top-2 rounded-md p-1 text-slate-950/50 opacity-0 transition-opacity hover:text-slate-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-slate-50/50 dark:hover:text-slate-50",s),"toast-close":"",...a,children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})});v.displayName=c.bm.displayName;let b=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(c.hE,{ref:t,className:(0,x.cn)("text-sm font-semibold",s),...a})});b.displayName=c.hE.displayName;let y=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(c.VY,{ref:t,className:(0,x.cn)("text-sm opacity-90",s),...a})});y.displayName=c.VY.displayName;var w=s(1998);function N(){let{toasts:e}=(0,w.dj)();return(0,r.jsxs)(h,{children:[e.map(function(e){let{id:t,title:s,description:a,action:i,...o}=e;return(0,r.jsxs)(p,{...o,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[s&&(0,r.jsx)(b,{children:s}),a&&(0,r.jsx)(y,{children:a})]}),i,(0,r.jsx)(v,{})]},t)}),(0,r.jsx)(f,{})]})}function j(e){let{children:t}=e,s=(0,i.useRouter)(),d=(0,o.createClientComponentClient)(),{role:c}=(0,l.h)(),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{!async function(){let{data:{user:e}}=await d.auth.getUser();if(e){let{data:t}=await d.from("profiles").select("org_id").eq("id",e.id).single();(null==t?void 0:t.org_id)&&m(t.org_id)}}()},[d]);let x=async()=>{await d.auth.signOut(),s.push("/auth/signin")};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)("nav",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n(),{href:"/dashboard",className:"text-xl font-semibold",children:"Zendesk Clone"}),(0,r.jsxs)("div",{className:"ml-10 flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/tickets",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Tickets"}),("admin"===c||"super_admin"===c)&&u&&(0,r.jsx)(n(),{href:"/organizations/".concat(u,"/settings"),className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Organization Settings"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/profile/settings",className:"bg-white text-gray-700 hover:bg-gray-50 px-4 py-2 rounded-md text-sm font-medium border",children:"Settings"}),(0,r.jsx)(n(),{href:"/profile",className:"bg-white text-gray-700 hover:bg-gray-50 px-4 py-2 rounded-md text-sm font-medium border",children:"Profile"}),(0,r.jsx)("button",{onClick:x,className:"bg-red-600 text-white hover:bg-red-700 px-4 py-2 rounded-md text-sm font-medium",children:"Sign Out"})]})]})})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t}),(0,r.jsx)(N,{})]})}},1998:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>u});var r=s(6540);let a=0,i=new Map,o=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],l={toasts:[]};function c(e){l=d(l,e),n.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_VALUE).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7724:(e,t,s)=>{"use strict";s.d(t,{h:()=>i});var r=s(6540),a=s(983);function i(){let[e,t]=(0,r.useState)("customer"),[s,i]=(0,r.useState)(!0),o=(0,a.useSupabaseClient)(),d=(0,a.useUser)();return(0,r.useEffect)(()=>{(async function(){if(!d){console.log("useUserRole - No user found"),i(!1);return}console.log("useUserRole - Fetching role for user:",d.id);let{data:e,error:s}=await o.from("profiles").select("role").eq("id",d.id).single();if(s){console.error("useUserRole - Error fetching user role:",s),i(!1);return}console.log("useUserRole - Fetched role:",null==e?void 0:e.role),t((null==e?void 0:e.role)||"customer"),i(!1)})()},[d,o]),{role:e,loading:s}}},6094:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(4164),a=s(856);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},6132:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(4848),a=s(6540),i=s(5234),o=s(6715),d=s(6939);function n(){let e=(0,i.createClientComponentClient)(),t=(0,o.useRouter)(),[s,n]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),u=(0,a.useCallback)(async()=>{try{let{data:{session:s}}=await e.auth.getSession();if(!s){t.push("/auth/signin");return}n(s.user)}catch(e){console.error("Session check error:",e),t.push("/auth/signin")}finally{c(!1)}},[t,e.auth]);return((0,a.useEffect)(()=>{u()},[u]),l)?(0,r.jsx)(d.A,{children:(0,r.jsx)("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Loading your dashboard..."})]})})}):s?(0,r.jsx)(d.A,{children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome back!"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:null==s?void 0:s.email})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 transition duration-150 ease-in-out hover:shadow-md",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:()=>t.push("/tickets/new"),className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out",children:"Create New Ticket"}),(0,r.jsx)("button",{onClick:()=>t.push("/profile"),className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out",children:"View Profile"})]})]})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 transition duration-150 ease-in-out hover:shadow-md",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No recent activity to show"})})]})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 transition duration-150 ease-in-out hover:shadow-md",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Overview"}),(0,r.jsxs)("dl",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Open Tickets"}),(0,r.jsx)("dd",{className:"mt-1 text-2xl font-semibold text-gray-900",children:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Resolved"}),(0,r.jsx)("dd",{className:"mt-1 text-2xl font-semibold text-gray-900",children:"0"})]})]})]})})]})]})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[727,106,882,848,636,593,792],()=>t(7100)),_N_E=e.O()}]);