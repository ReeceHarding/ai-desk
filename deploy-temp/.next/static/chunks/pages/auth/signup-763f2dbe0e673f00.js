(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{8888:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signup",function(){return r(2261)}])},8817:(e,s,r)=>{"use strict";r.d(s,{A:()=>o});var t=r(4848);function o(e){let{children:s,title:r}=e;return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white",children:(0,t.jsxs)("div",{className:"w-full max-w-md px-8 py-12",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("h1",{className:"text-4xl font-bold text-center mb-2",children:r})}),s]})})}r(6540)},2261:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(4848),o=r(6540),l=r(6715),a=r(5234),i=r(8817),n=r(1106),c=r.n(n);function u(){let[e,s]=(0,o.useState)(""),[r,n]=(0,o.useState)(""),[u,d]=(0,o.useState)(null),[m,h]=(0,o.useState)(!1),g=(0,l.useRouter)(),f=(0,a.createClientComponentClient)({supabaseUrl:"http://127.0.0.1:54321",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"}),x=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),p=async()=>{try{console.log("[SIGNUP] Starting Google sign-in flow"),d(null),h(!0);let{data:e,error:s}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback"),queryParams:{access_type:"offline",prompt:"consent"}}});if(console.log("[SIGNUP] Google sign-in response:",{success:!s,error:null==s?void 0:s.message,hasUrl:!!(null==e?void 0:e.url),url:null==e?void 0:e.url,redirectTo:"".concat(window.location.origin,"/auth/callback")}),s)throw console.error("[SIGNUP] Google sign-in error:",s),s;if(null==e?void 0:e.url)console.log("[SIGNUP] Redirecting to OAuth URL:",e.url),window.location.href=e.url;else throw console.error("[SIGNUP] No OAuth URL received in response"),Error("No OAuth URL received")}catch(e){console.error("[SIGNUP] Google sign-in error:",e),d(e instanceof Error?e.message:"Failed to start Google sign-in")}finally{h(!1)}},b=async s=>{s.preventDefault(),d(null),h(!0);try{if(!x(e))throw Error("Please enter a valid email address");let{data:s,error:t}=await f.auth.signUp({email:e,password:r,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback"),data:{email_confirmed:!0}}});if(console.log("Signup response:",{signUpData:s,signUpError:t}),t)throw t;if(null==s?void 0:s.user){console.log("User created successfully:",s.user),await new Promise(e=>setTimeout(e,1e3)),console.log("Checking for profile creation...");let{data:t,error:o}=await f.from("profiles").select("*").eq("id",s.user.id).single();console.log("Profile check result:",{profile:t,profileError:o}),o&&console.error("Profile verification error:",o);let{error:l}=await f.auth.signInWithPassword({email:e,password:r});if(l)throw l;g.push("/dashboard")}else throw Error("Failed to create user account")}catch(e){console.error("Signup error:",e),d(e instanceof Error?e.message:"Failed to create account")}finally{h(!1)}};return(0,t.jsx)(i.A,{title:"Create your account",children:(0,t.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[u&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-100 text-red-600 p-4 rounded-lg text-sm font-medium animate-fade-in",children:u}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900",children:"Work Email"}),(0,t.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>s(e.target.value),required:!0,className:"mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2.5 text-gray-900 placeholder-gray-500 transition-colors duration-200 ease-in-out focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",placeholder:"you@company.com"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",value:r,onChange:e=>n(e.target.value),required:!0,minLength:6,className:"mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2.5 text-gray-900 placeholder-gray-500 transition-colors duration-200 ease-in-out focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",placeholder:"••••••••"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Must be at least 6 characters"})]}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"relative w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150 ease-in-out",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,t.jsx)("span",{className:"pl-8",children:"Creating account..."})]}):"Create account"}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or sign up with"})})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)("button",{type:"button",onClick:p,disabled:m,className:"w-full inline-flex items-center justify-center py-2.5 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150 ease-in-out",children:[(0,t.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M23.766 12.2764C23.766 11.4607 23.6999 10.6406 23.5588 9.83807H12.24V14.4591H18.7217C18.4528 15.9494 17.5885 17.2678 16.323 18.1056V21.1039H20.19C22.4608 19.0139 23.766 15.9274 23.766 12.2764Z",fill:"#4285F4"}),(0,t.jsx)("path",{d:"M12.24 24.0008C15.4764 24.0008 18.2058 22.9382 20.1944 21.1039L16.3274 18.1055C15.2516 18.8375 13.8626 19.252 12.24 19.252C9.07376 19.252 6.39389 17.1399 5.44176 14.3003H1.45166V17.3912C3.50195 21.4434 7.63825 24.0008 12.24 24.0008Z",fill:"#34A853"}),(0,t.jsx)("path",{d:"M5.44175 14.3003C5.21164 13.5681 5.08083 12.7862 5.08083 12.0008C5.08083 11.2154 5.21164 10.4335 5.44175 9.70129V6.61041H1.45165C0.524374 8.23827 0 10.0657 0 12.0008C0 13.9359 0.524374 15.7633 1.45165 17.3912L5.44175 14.3003Z",fill:"#FBBC05"}),(0,t.jsx)("path",{d:"M12.24 4.74966C14.0291 4.74966 15.6265 5.36715 16.8902 6.56198L20.2694 3.18264C18.1999 1.21215 15.4708 0 12.24 0C7.63825 0 3.50195 2.55737 1.45166 6.61038L5.44176 9.70126C6.39389 6.86173 9.07376 4.74966 12.24 4.74966Z",fill:"#EA4335"})]}),(0,t.jsx)("span",{className:"ml-2",children:"Continue with Google"})]})})]}),(0,t.jsxs)("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",(0,t.jsx)(c(),{href:"/auth/signin",className:"font-medium text-blue-600 hover:text-blue-700 transition duration-150 ease-in-out",children:"Sign in"})]})]})})}},6715:(e,s,r)=>{e.exports=r(8440)}},e=>{var s=s=>e(e.s=s);e.O(0,[106,636,593,792],()=>s(8888)),_N_E=e.O()}]);